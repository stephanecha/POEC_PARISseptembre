<!doctype html><html lang=en><head><meta charset=utf-8 /><meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no" /><title></title><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous /><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.3.1/css/all.css integrity=sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU crossorigin=anonymous /><link rel=stylesheet href=/Application/css/bootstrap-alert.min.css /><link rel=stylesheet href=/Application/css/application.css /><style>.Tache{border:solid 1px #d3d3d3;border-radius:0;border-left:none;border-right:none;padding:10px}.Tache input[type=checkbox]{margin-right:8px}.Tache button{float:right;display:none}.Tache:hover{border:solid 1px #808080;border-left:none;border-right:none}.Tache:not(.alert-success):hover{background-color:#f5f5f5}.Tache:hover button{display:block}</style></head><body><nav class="navbar navbar-expand-sm navbar-dark bg-dark"><a class=navbar-brand href=/ ><i class="fas fa-check-double"></i> TodoApp</a><div class="collapse navbar-collapse" id=navbarNav><ul class="navbar-nav mr-auto"><li class="nav-item active"> <a class=nav-link href=/ >Taches <span class=sr-only>(current)</span></a></li><li class=nav-item><a class=nav-link href=/application/html/categories.html>Catégories</a></li></ul></div></nav><div class=container-fluid><ul class=toolbar><li><a href=/application/html/tache.html class="btn btn-primary">Nouvelle tache</a></li></ul><div id=listeTaches></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/Application/js/bootstrap-alert.min.js></script><script src=/Application/js/application.js></script><script>function getTaches(){var n=$("#listeTaches");setLoader(n);$.ajax({url:"/api/taches",success:function(t){var i,r,u;if(n.empty(),t.length>0)for(tache of t){i=$('<div class="Tache alert"><\/div>');i.attr("data-id",tache.ID);tache.Statut&&i.addClass("alert-success");r=$('<input type="checkbox">');r.attr("checked",tache.Statut);r.on("click",function(){var n=$(this).closest(".Tache"),t=n.attr("data-id");ModifierStatutTache(t,this)});u=$('<button class="btn btn-danger btn-sm"><i class="fas fa-trash"><\/i><\/button>');u.on("click",function(){$.bsAlert.confirmTitle="Suppression";$.bsAlert.closeDisplay="Non";$.bsAlert.sureDisplay="Oui";$.bsAlert.confirm("Es-tu sûr?",()=>{var n=$(this).closest(".Tache"),t=n.attr("data-id");SupprimerTache(t,n)})});i.append(r);i.append($("<label><\/label>").text(tache.Nom));i.append(u);n.append(i)}else n.append($('<p class="lead">Aucune tache pour le moment...<\/p>'))},error:Erreur})}function ModifierStatutTache(n,t){$.ajax({type:"PUT",url:"/api/tachestatut/"+n+"?statut="+t.checked,success:function(){var n=$(t).closest(".Tache");t.checked?n.addClass("alert-success"):n.removeClass("alert-success")},error:Erreur})}function SupprimerTache(n){$.ajax({type:"DELETE",url:"/api/taches/"+n,success:function(){getTaches()},error:Erreur})}function Erreur(){alert("Erreur !")}$(document).ready(getTaches)</script></body></html>